<!-- Flask/PyMySQL app to post ride request and offers in the rideshare_db. 
    HTML file that implements the home page of the app
    by extending Base HTML file
    Daisy, Lindsay, and Valerie. 
    Fall 2022 -->
{% extends "base.html" %}

{% block head_stuff %}

<!-- Start of CAS STUFF-->
        
{% if username %}

    <form method="GET" action="{{url_for('cas.logout')}}">
      <button>logout {{username}}</button>
    </form>
{% else %}
<form method="GET" action="{{url_for('cas.login')}}">
 <button>login</button>
</form>
{% endif %}

<!-- End of CAS STUFF-->


{% endblock %}

{% block main_content %}
<h1>Wellesley College Rideshare</h1>
<p>Students looking for drivers are posts highlighted in <b>blue</b> and students offering rides are posts highlighted in <b>green</b>.</p>



<form method= GET action="{{url_for('result')}}">
  <label for="destination-name">Destination Name:</label><br>
  <input type="text" name="destination-name"><br>
  <label for="street-address">Street Address:</label><br>
  <input type="text" name="street-address"><br>
  <label for="city">City:</label><br>
  <input type="text" name="city"><br>
  <label for="state">State:</label>
  <select id="menu-state" name="menu-state">
  <option value="none"></option>
    {% for state in states %}
    <option value="{{state}}">{{state}}</option>
    {% endfor %}
 </select><br>
 <label for="zip">Zip Code:</label><br>
  <input type="text" name="zip"><br>
  <label for="user">User:</label><br>
  <select id="menu-user" name = "menu-user">
    <option value="none"></option>
    {% for user in users %}
    <option value="{{user.username}}">{{user.username}} ({{user.name}})</option>
    {% endfor %}
  </select><br>
  <label for="date">Date:</label>
  <input type="date" name="date"><br>
  <label for="time">Time:</label><br>
  <input type="time" name="time"><br>
  <label for="cost">Cost ($):</label><br>
  <input type="number" name="cost"><br>
  <label for="seats">Seats:</label><br>
  <input type="number" name="seats"><br>
  <p><input type="submit" value="Search"></p>
     
</form>


{% for post in posts %}
{% if post.type == "offering" %}
<div class ="post-block" id = "offering">
  <h3>Offering: {{post.title}}</h3> 
{% else %}
<div class ="post-block" id = "seeking">
  <h3>Looking for: {{post.title}}</h3> 
{% endif %}
    {% if post.type == "offering" %}
    <div class="driver-info-block" id="driver-block">
    {% else %}
    <div class="rider-info-block" id="driver-block">
    {% endif %}
        <p>User: {{post.name}} (<a href = "{{ url_for( 'profile', username = post.username ) }}">{{post.username}}</href></a>)</p>
        <p>Phone Number: {{post.phone_number}}</p>
    </div>
    {% if post.type == "offering" %}
    <div class="driver-info-block" id="destination-block">
    {% else %}
    <div class="rider-info-block" id="destination-block">
    {% endif %}
        <p>{{post.destination}}, {{post.street_address}}, {{post.city}}, {{post.state}} {{post.zipcode}}</p>
    </div>
    {% if post.type == "offering" %}
    <div class ="driver-info-block" id="ride-block">
    {% else %}
    <div class ="rider-info-block" id="ride-block">
    {% endif %}
    <p>Date: {{post.date.month}}/{{post.date.day}}/{{post.date.year}} Time: {{post.time}}</p>
    <p>Seats: {{post.seats}}</p>
    <p>Cost: ${{post.cost}}</p>
    <p>Special Request: {{post.special_request}}</p>
    </div>
</div>
{% endfor %}


{% endblock %}
